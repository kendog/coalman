{% extends "layouts/layout1.html" %}
{% set active_section = "admin_files_edit" %}

{% block title %}File: {{ file.name }}{% endblock %}

{% block content %}

    <h3>Edit File</h3>
    <hr>

    <form id="files-form" method="post" action="" enctype=multipart/form-data>

        <div class="row">
            <div class="col-md-5">

                <div class="form-group">
                    <label for="title">Title</label>
                    <input id="title" name="title" type="text" class="form-control" value="{{ file.title }}" />
                </div>

                <div class="form-group">
                    <label for="desc">Description</label>
                    <input id="desc" name="desc" type="text" class="form-control" value="{{ file.desc }}" />
                </div>

                <hr>

                <div class="form-group">
                    <label for="path">Path</label>
                    <input disabled id="path" name="path" type="text" class="form-control" value="{{ file.path }}" />
                    <label for="name">File</label>
                    <input disabled id="name" name="name" type="text" class="form-control" value="{{ file.name }}" />
                    <a href="{{ url_for('download_file', id=file.id) }}" class="btn btn-block btn-xs" target="_blank">Preview</a>
                </div>

                <hr>

                <div class="form-group">
                    <label for="file">Upload new file</label>
                    <input id="file" name="file" type="file" class="form-control">
                </div>


            </div>

            <div class="col-md-1"></div>
            <div class="col-md-6">
                <div class="form-group">
                    {%  for group in tag_groups %}
                        <p><button class="btn btn-{{ group.tag_id }} btn-xs">{{ group.name }}</button></p>
                        <ul class="list-unstyled">
                            {%  for tag in tag_hash[group.tag_id] %}
                                <li><input {% if tag in file.tags %}checked{% endif %} class="form-check-input" type="checkbox" id="tags" name="tags" value="{{ tag.id }}"> {{ tag.name }}</li>
                            {% endfor %}
                        </ul>
                        <br>
                    {% endfor %}
                </div>

            </div>

        </div>

        <hr>

        <div class="form-group">
            <input type="submit" class="btn btn-primary" name="submit-edit" value="Update">
        </div>

    </form>


{% endblock %}

{% block plugins %}

    <script type="text/javascript" src="/static/js/jquery.validate.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#files-form").validate({
                rules: {
                    title: "required",
                    desc: "required"
                }
            });
        });
    </script>

{% endblock %}